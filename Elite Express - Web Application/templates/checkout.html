<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ELITE EXPRESS - Online Grocery Store| Home</title>

    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,800,900" rel="stylesheet">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="{{url_for('static',filename='css/style.css')}}" rel="stylesheet">
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <style type="text/css">
        .box {
            background-color: red;
            width: 100px;
            height: 100px
        }
    </style>
</head>

<body style="background-color: aliceblue;">
    <!-- header  -->
    <nav class="navbar navbar-expand-lg navbar-light ">
        <div class="container-fluid">
            <div class="col-md-3 header navbar-band">
                <h1><a style="text-decoration:none" href="/"><span id="elite_logo">ELITE</span>EXPRESS</a></h1>
            </div>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <form class="d-flex">
                    <input id="search" class="form-control" type="search" placeholder="Search Items"
                        aria-label="Search">
                    <button id="btn" class="btn" type="submit"><i class="fa fa-search"
                            aria-hidden="true"></i></button></button>
                </form>
                <ul class="navbar-nav me-auto mb-2 mb-lg-0" style="margin-top: 15px;">
                    <li class="nav-item">
                        <a id="home" class="nav-link active" aria-current="page" href="/"
                            style="color:rgb(26, 23, 218)">Home</a>
                    </li>
                    <li class="nav-item">
                        <a id="about" class="nav-link active" aria-current="page" href="/about">About
                            Us</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a id="category" class="nav-link dropdown-toggle" href="#" id="navbarDropdown"
                            data-bs-toggle="dropdown" aria-expanded="false">Categories </a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                            {% for i in range(0,List|length) %}
                            <li class="dropdown-submenu">
                                <button class="btn" onclick="window.location='/'">{{List[i]}}</button>
                                {% if List1[i]|length > 0 %}
                                <ul class="dropdown-menu">
                                    {% for items1 in List1[i] %}
                                    <li><button class="btn" onclick="window.location='/showItems'" id = '{{items1}}'>{{items1}}</button></li>
                                    {% endfor %}
                                </ul>
                                {% endif %}
                            </li>
                            {% endfor %}
                        </ul>
                    </li>

                    <li class="nav-item dropdown">
                        <a id="profile" class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                            data-bs-toggle="dropdown" aria-expanded="false">
                            Profile</a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <li><a class="dropdown-item" href="/" data-bs-toggle="modal"
                                    data-bs-target="#loginForm">Login</a></li>
                            <li><a class="dropdown-item" href="/" data-bs-toggle="modal"
                                    data-bs-target="#signUpForm">Sign up</a></li>
                            <li><a class="dropdown-item" href="/logOutCust">Logout</a></li>
                        </ul>
                    </li>
                    <li class="nav-item">
                        <button id="menu-toggle" href="#" class="btn btn-primary btn-lg toggle fa fa-shopping-cart"  data-bs-toggle="modal" data-bs-target="#cartshow"></i></button>
                    </li>
                </ul>
            </div>
        </div>
        <div class="clearfix"></div>
    </nav>
    <!-- Main div -->
    <div class="wrapper d-flex " style="display:inline;">    
        <!-- Side bar -->
        <div class="container-fluid col-2 m-2 d-flex flex-column align-items-center align-items-sm-start px-3 pt-2 text-white min-vh-100"
            style="background-color: rgb(236, 236, 236);">
            <a href="/" class="d-flex align-items-center pb-3 mb-md-0 me-md-auto text-white text-decoration-none">
                <span class="fs-5 d-none d-sm-inline"
                    style="color: black; font-weight: 500; font-family: georgia,garamond,serif;">Category</span>
            </a>
            <ul id="side" style="list-style: none">
                {% for i in range(0,List|length) %}
                <li class="dropdown-submenu">
                    <button class="btn" onclick="window.location='/'" style="color:rgb(0, 0, 0)">{{List[i]}}</button>
                    {% if List1[i]|length > 0 %}
                    <ul class="dropdown-menu">
                        {% for items1 in List1[i] %}
                        <li><a class="btn" href="/showItems" id='{{items1}}'>{{items1}}</a></li>

                        {% endfor %}
                    </ul>
                    {% endif %}
                </li>
                {% endfor %}
            </ul>
        </div>
        <!-- Right side -->
        <div class="col">
            <!-- Upper picture wali -->
            <div id="Mycarousel" class="carousel slide w-100 mt-2" data-bs-ride="carousel" data-bs-interval="3000">
                <div class="carousel-indicators">
                    <button type="button" data-bs-target="#Mycarousel" data-bs-slide-to="0" class="active"></button>
                    <button type="button" data-bs-target="#Mycarousel" data-bs-slide-to="1"></button>
                    <button type="button" data-bs-target="#Mycarousel" data-bs-slide-to="2"></button>
                </div>
                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <img id="#imgCarousal" class="d-block w-100" src="{{url_for('static',filename='images/1.jpg')}}"
                            alt="First slide">
                        <div class="carousel-caption d-none d-md-block">
                            <h5><button id="btnOdr" type="button">Order Now</button></h5>
                        </div>
                    </div>
                    <div class="carousel-item">
                        <img id="#imgCarousal" class="d-block w-100" src="{{url_for('static',filename='images/2.jpg')}}"
                            alt="Second slide">
                        <div class="carousel-caption d-none d-md-block">
                            <h5><button id="btnOdr" type="button">Order Now</button></h5>
                        </div>
                    </div>
                    <div class="carousel-item">
                        <img id="#imgCarousal" class="d-block w-100 "
                            src="{{url_for('static',filename='images/3.jpg')}}" alt="Third slide">
                        <div class="carousel-caption d-none d-md-block">
                            <h5><button id="btnOdr" type="button">Order Now</button></h5>
                        </div>
                    </div>
                </div>
                <button class="carousel-control-prev" data-bs-target="#Mycarousel" type="button" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" data-bs-target="#Mycarousel" type="button" data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                </button>
            </div>
            <div class="container adjust-items-center" style="display: grid; grid-template-columns: 1fr 1fr 1fr 1fr;"  id="board">
                <!-- <div class="row" ></div>-->
             </div> 
            <div class="col">
                <footer class="mainfooter" role="contentinfo">
                    <div class="footer-middle">
                    <div class="container">
                      <div class="row">
                        <div class="col-md-3 col-sm-6">
                          <!--Column1-->
                          <div class="footer-pad">
                            <div class="col-md-3 header navbar-band m-0">
                                <h1><a style="text-decoration:none; font-size:x-large" href="/"><span id="elite_logo">ELITE</span>EXPRESS</a></h1>
                            </div>
                            <h7>Working Days: </h7>
                            <p>Mon - Sun / 9:00AM - 11:00PM</p>
                          </div>
                        </div>
                        <div class="col-md-3 col-sm-6">
                          <!--Column1-->
                          <div class="footer-pad">
                            <h4>City</h4>
                            <ul class="list-unstyled">
                              <li><a href="#">Lahore</a></li>
                              <li><a href="#">Sargodha</a></li>
                              <li><a href="#">Gujranwala</a></li>
                              <li><a href="#">Islamabad</a></li>
                              <li><a href="#">Sialkot</a></li>
                              <li><a href="#">Karachi</a></li>
                            </ul>
                          </div>
                        </div>
                        <div class="col-md-3 col-sm-6">
                          <!--Column1-->
                          <div class="footer-pad">
                            <h4>Reach Us At</h4>
                            <ul class="list-unstyled">
                                <h7>Emails: </h7>
                              <li><a href="#">bitf19a008@pucit.edu.pk</a></li>
                              <li><a href="#">bitf19a016@pucit.edu.pk</a></li>
                              <li><a href="#">bitf19a027@pucit.edu.pk</a></li>
                              <li><a href="#">bitf19a031@pucit.edu.pk</a></li>
                              <li><a href="#">bitf19a038@pucit.edu.pk</a></li>
                              <li><a href="#">elite.express243@gmail.com</a></li>
                            </ul>
                          </div>
                        </div>
                          <div class="col-md-3">
                              <h4>Follow Us</h4>
                              <ul class="social-network social-circle">
                               <li><a href="https://www.facebook.com/airliftexpressPK/" class="icoFacebook" title="Facebook"><i class="fa fa-facebook"></i></a></li>
                                <li><a href="https://www.linkedin.com/company/airlifttechnologies/?originalSubdomain=pk" class="icoLinkedin" title="Linkedin"><i class="fa fa-linkedin"></i></a></li>
                               <li><a href="https://www.instagram.com/airliftexpress_pk/" class="icoInstagram" title="Instagram"><i class="fa fa-instagram"></i></a></li>
                              </ul>				
                          </div>
                      </div>
                      <div class="row">
                          <div class="col-md-12 copy">
                              <p class="text-center">&copy; Copyright 2022 - Elite Express.  All rights reserved.</p>
                          </div>
                      </div>
                  
                  
                    </div>
                    </div>
                  </footer>
                    
                    
            </div>
        </div>
    </div>
    <!-- login -->
    <!-- Modal -->
    <div class="modal fade" id="loginForm" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Login Now</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form action="/loginCus" method="post">
                        <div class="mb-3">
                            <label class="form-label">Email Address</label>
                            <input type="email" class="form-control" id="LogInemail" name="email" placeholder="Email" />
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Password</label>
                            <input type="password" class="form-control" id="LogInpassword" name="password"
                                placeholder="Password" />
                        </div>
                        <div class="modal-footer d-block">
                            <p class="float-start">Not yet account <a href="#" data-bs-toggle="modal"
                                    data-bs-target="#signUpForm">Sign Up</a></p>
                            <button type="submit" class="btn btn-warning float-end">Log In</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <!-- //login -->
    <!--signup -->
    <!-- Model1 -->
    <div class="modal fade" id="signUpForm" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Sign Up Now</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form action="/signupCus" method="post">
                        <div class="mb-3">
                            <label class="form-label">Name</label>
                            <input type="text" class="form-control" id="username" name="username"
                                placeholder="Username" />
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Email Address</label>
                            <input type="email" class="form-control" id="email" name="email"
                                placeholder="Enter Email" />
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Password</label>
                            <input type="password" class="form-control" id="password" name="password"
                                placeholder="Password" />
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Address</label>
                            <input type="text" class="form-control" id="Address" name="Address" placeholder="Address" />
                        </div>
                        <div class="mb-3">
                            <label class="form-label">City</label>
                            <input type="text" class="form-control" id="City" name="City" placeholder="City" />
                        </div>
                        <div class="mb-3">
                            <label class="form-label">ZipCode</label>
                            <input type="text" class="form-control" id="ZipCode" name="ZipCode" placeholder="ZipCode" />
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Country</label>
                            <input type="text" class="form-control" id="Country" name="Country" placeholder="Country" />
                        </div>
                        <div class="modal-footer d-block">
                            <button type="submit" class="btn btn-warning float-end">Register</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
  
    <script>
        let error_ = '{{ error }}';
        let msj_ = '{{ errormsg }}';
        console.log(error_, msj_)
        if (error_ == "True") { alert(msj_); }    	 
    </script>
    <script>
        $(document).ready(function () {
        var addInput = '#qty'; 
        var n = 0; 
        $(addInput).val(n);
        $('#plus').on('click', function(){
            $(addInput).val(++n);
        })

        $('#min').on('click', function(){
            if (n >= 1) {
            $(addInput).val(--n);
            } else {
                //do nothing :) exception aa jani
            }
        });
        });
            $.ajax({
                url: "/showAll",
                type: "GET",
                
                success: function (result) {
                    $("#board").html('');
                    var divContent = '';
                    var amount=0;
                    var size = result.length;
                    data = result
                    for (var i = 0; i <size; ++i) {
                        amount = data[i][2];
                       divContent +=  '<div style="color-border:red;width:230px;height:430px; margin-top:10px; padding:2px; border-width: 2px; border-style: solid;"><div id ="pic" style="border-width: 2px; border-style: solid; margin:10px"><img style=" height: 100%;width:100%" src = '+data[i][5]+'></img></div><p id="desc" rows="3" cols="12" readonly  style="width:88%;  resize: none;margin:10px;" type="text" name="description"><b>'+data[i][1]+'</b><br> '+data[i][4]+'<br>Price: '+data[i][3]+'Rs.</p><div style="margin-top: 2px;"><button  id = "plus"class=" btn btn-outline-secondary" type="button" style="margin-left:8px; "><i class="fa fa-plus"></i></button><input style=" margin: 2%; width: 55%;"type="number" id ="qty" class="input" value="0" min="1" max = '+data[i][2]+' /><button type="button" id ="min" class="btn btn-outline-secondary" ><i class="fa fa-minus"></i></button> <button style="margin-top:10px;margin-left: 23px; margin-bottom: 15px;width: 80%; height: 40px" id='+data[i][0]+' type="button" class="btn btn-dark" onclick='+makingRow(data[i][5],data[i][3],data[i][4],$("#qty").text())+'> Add to cart</button></div></div>';
                    }
                    $("#board").append(divContent);
                }
            });
            // $('#cat').on('click', 'td button', function ()            
        //   function makingRow(image,price,amount,total)
        //   {
        //         var divv='';
        //         $("#sidebar-wrapper").html('');   
        //         divv='<img style="height:8%;width:65%; margin-top:8px;" src = '+image+'></img>';
        //         $("#sidebar-wrapper").append(divv); 
        //         divv='<p style="margin-top:8px;"> Price  '+price+'Rs.</p>';
        //         $("#sidebar-wrapper").append(divv); 
        //         divv='<p style="margin-top:8px;"> Qty  '+amount+' </p>';
        //         $("#sidebar-wrapper").append(divv); 
        //         divv='<p style="margin-top:8px;"> Total  '+total+'Rs.</p>';
        //         $("#sidebar-wrapper").append(divv); 
        //     };
    </script>
    <div class="modal fade" id="cartshow" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content" style="width: 900px;">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Cart</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="shopping-cart">
                        <div class="txt-heading">Shopping Cart</div>
                        {% if 'cart_item' in session %}
                        <a id="btnEmpty" href="{{ url_for('.empty_cart') }}">Empty Cart</a>
                        <table class="tbl-cart" cellpadding="10" cellspacing="1">
                            <tbody>
                                <tr>
                                    <th style="text-align:left;">Name</th>
                                    <th style="text-align:left;">Code</th>
                                    <th style="text-align:right;" width="5%">Quantity</th>
                                    <th style="text-align:right;" width="10%">Unit Price</th>
                                    <th style="text-align:right;" width="10%">Price</th>
                                    <th style="text-align:center;" width="5%">Remove</th>
                                </tr>
                                {% for key, val in session['cart_item'].items() %}
                                {% set quantity = session['cart_item'][key]['Quantity'] %}
                                {% set price = session['cart_item'][key]['Price'] %}
                                {% set item_price = session['cart_item'][key]['Total_price'] %}
                                <tr>
                                    <script>console.log("{{session['cart_item'][key]['Picture']}}")
                                        console.log("{{key}}")
                                    </script>
                                    <td><img class="cart-item-image" style="width:6%; height:6%"
                                            src="{{ session['cart_item'][key]['Picture']}}" />{{
                                        session['cart_item'][key]['Name'] }}</td>
                                    <td>{{ session['cart_item'][key]['ItemID'] }}</td>
                                    <td style="text-align:right;">{{ quantity }}</td>
                                    <td style="text-align:right;">Rs. {{ price }}</td>
                                    <td style="text-align:right;">Rs. {{ item_price }}</td>
                                    <td style="text-align:center;">
                                        <a href="{{ url_for('.delete_product', code=session['cart_item'][key]['ItemID']) }}"
                                            class="btnRemoveAction">
                                            <img src="/static/images/icon-delete.png" alt="Remove Item" />
                                        </a>
                                    </td>
                                </tr>
                                {% endfor %}
                                <tr>
                                    <td colspan="2" align="right">Total:</td>
                                    <td align="right">{{ session['all_total_quantity'] }}</td>
                                    <td align="right" colspan="2"><strong>Rs. {{ session['all_total_price'] }}</strong>
                                    </td>
                                    <td></td>
                                </tr>
                            </tbody>
                        </table>
                        {% else: %}
                        <div class="no-records">Your Cart is Empty</div>
                        {% endif %}
                    </div>
                    <div>
                        <a href="checkout.html" class="btn checkout m-3">Checkout</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>